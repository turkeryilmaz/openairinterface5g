Active_gNBs = ("cu-rfsim");
# Asn1_verbosity, choice in: none, info, annoying
Asn1_verbosity = "none";

gNBs =
(
 {
    ////////// Identification parameters:
    gNB_ID = 0xd00;
    gNB_name  =  "cu-rfsim";


    // Tracking area code, 0x0000 and 0xfffe are reserved values
    tracking_area_code  =  1;
    plmn_list = ({ mcc = 001; mnc = 01; mnc_length = 2; snssaiList = ({ sst = 1; sd = 0xFFFFFF }) });
    @include "EHOBand78-neighbour.conf"

    nr_cellid = 12345678L;

    tr_s_preference = "f1";

    local_s_address     = "127.0.0.3";
    remote_s_address    = "0.0.0.0"; # multiple DUs
    local_s_portd       = 2152;
    remote_s_portd      = 2152;


    # ------- SCTP definitions
    SCTP :
    {
        # Number of streams to use in input/output
        SCTP_INSTREAMS  = 2;
        SCTP_OUTSTREAMS = 2;
    };


    ////////// AMF parameters:
    amf_ip_address = ({ ipv4 = "192.168.70.132"; });

    NETWORK_INTERFACES :
    {
        GNB_IPV4_ADDRESS_FOR_NG_AMF              = "192.168.70.129/24";
        GNB_IPV4_ADDRESS_FOR_NGU                 = "192.168.70.129/24";
        GNB_PORT_FOR_S1U                         = 2152; # Spec 2152
    };

    # -------- Energy-Efficiency-Driven HO configuration --------
    EnergyHO = {
      enable = 1;
      simple_mode = 1;                  # start with simple predicate to validate flow
      hysteresis_margin_mw = 1500;
      sinr_threshold_db = -3.0;
      switch_off_prob_threshold = 0.8;
      default_ue_delay_req_ms = 25;
      t_win_ms = 200;
      guard_ms = 2000;
      k_consecutive = 1;
      debug_logs = 1;

      # Access network power parameters (defaults for this CU)
      n_trx = 4;
      p_idle_mw = 8000;
      delta_p = 4.0;
      p_rb_mw = 50;

      # Injection: relative path resolved against this config file's directory
      injection = {
        enable = 1;
        json_path = "oai_energy_ho.json";
        poll_period_ms = 100;
      };
    };
 }
);

security = {
  # preferred ciphering algorithms
  # the first one of the list that an UE supports in chosen
  # valid values: nea0, nea1, nea2, nea3
  ciphering_algorithms = ( "nea0" );

  # preferred integrity algorithms
  # the first one of the list that an UE supports in chosen
  # valid values: nia0, nia1, nia2, nia3
  integrity_algorithms = ( "nia2", "nia0" );

  # setting 'drb_ciphering' to "no" disables ciphering for DRBs, no matter
  # what 'ciphering_algorithms' configures; same thing for 'drb_integrity'
  drb_ciphering = "yes";
  drb_integrity = "no";
};

log_config : {
  global_log_level = "info";
  pdcp_log_level = "info";
  rrc_log_level = "debug";   # show HO/EHO decisions
  f1ap_log_level = "debug";  # show F1 HO messages
  ngap_log_level = "info";
};

e2_agent = {
  near_ric_ip_addr = "127.0.0.1";
  sm_dir = "/usr/local/lib/flexric/"
};
